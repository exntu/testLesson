<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
	
<!-- namespace에서 interface로 정의된 DAO를 정확히 명시해주어야 한다 -->
<mapper namespace="com.skt.date.sql.user">

	<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////// INCLUDE ////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////////////////////////// -->
	
	<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////// SELECT /////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////////////////////////// -->
	
	<!-- //////////////////////////////////////////////////
	//
	// 유저를 조회한다. (로그인용)
	//
	////////////////////////////////////////////////// -->
	<select id="selectLoginUser" parameterType="UserVo" resultType="UserVo">
		/* com.skt.date.sql.user.selectUser */
		SELECT		EMAIL		AS email,
					PASS		AS pass,
					GENDER		AS gender,	
					NICKNAME	AS nickname
					
		FROM		T_USER
		
		WHERE		EMAIL 	= #{email}
		AND			PASS	= #{pass}
	</select>
	
	<!-- //////////////////////////////////////////////////
	//
	// 유저를 조회한다.
	//
	////////////////////////////////////////////////// -->
	<select id="selectUser" parameterType="UserVo" resultType="UserVo">
		/* com.skt.date.sql.user.selectUser */
		SELECT		EMAIL		AS email,
					PASS		AS pass,
					GENDER		AS gender,	
					NICKNAME	AS nickname
					
		FROM		T_USER
		
		WHERE		EMAIL 	= #{email}
	</select>
	
	<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////// MERGE //////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////////////////////////// -->
	
	<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////// INSERT /////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////////////////////////// -->
	
	<!-- //////////////////////////////////////////////////
	//
	// 가입신청을 처리한다.
	//
	////////////////////////////////////////////////// -->
	<insert id="insertUser" parameterType="UserVo">
		/* com.skt.date.sql.user.insertUser */
		INSERT INTO T_USER(
			EMAIL,
			PASS,
			GENDER,
			NICKNAME,
			CREATE_BY,
			CREATE_DT,
			UPDATE_BY,
			UPDATE_DT
		)
		VALUES(
			#{email},
			#{pass},
			#{gender},
			#{nickname},
			#{createdUserId},
			CURRENT_TIMESTAMP(),
			#{updatedUserId},
			CURRENT_TIMESTAMP()
		)
	</insert>
	
	<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////// UPDATE /////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////////////////////////// -->
	
	<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////// DELETE /////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////////////////////////// -->
	
</mapper>